(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc9f4a04"],{1148:function(e,t,a){"use strict";var r=a("a691"),s=a("1d80");e.exports="".repeat||function(e){var t=String(s(this)),a="",n=r(e);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(a+=t);return a}},"408a":function(e,t,a){var r=a("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},b680:function(e,t,a){"use strict";var r=a("23e7"),s=a("a691"),n=a("408a"),i=a("1148"),o=a("d039"),c=1..toFixed,u=Math.floor,l=function(e,t,a){return 0===t?a:t%2===1?l(e,t-1,a*e):l(e*e,t/2,a)},p=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},d=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){c.call({})}));r({target:"Number",proto:!0,forced:d},{toFixed:function(e){var t,a,r,o,c=n(this),d=s(e),f=[0,0,0,0,0,0],g="",m="0",y=function(e,t){var a=-1,r=t;while(++a<6)r+=e*f[a],f[a]=r%1e7,r=u(r/1e7)},b=function(e){var t=6,a=0;while(--t>=0)a+=f[t],f[t]=u(a/e),a=a%e*1e7},h=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==f[e]){var a=String(f[e]);t=""===t?a:t+i.call("0",7-a.length)+a}return t};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(g="-",c=-c),c>1e-21)if(t=p(c*l(2,69,1))-69,a=t<0?c*l(2,-t,1):c/l(2,t,1),a*=4503599627370496,t=52-t,t>0){y(0,a),r=d;while(r>=7)y(1e7,0),r-=7;y(l(10,r,1),0),r=t-1;while(r>=23)b(1<<23),r-=23;b(1<<r),y(1,1),b(2),m=h()}else y(0,a),y(1<<-t,0),m=h()+i.call("0",d);return d>0?(o=m.length,m=g+(o<=d?"0."+i.call("0",d-o)+m:m.slice(0,o-d)+"."+m.slice(o-d))):m=g+m,m}})},d879:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("b-loading",{attrs:{"is-full-page":e.isFullPage,active:e.isLoading,"can-cancel":!1},on:{"update:active":function(t){e.isLoading=t}}}),a("h2",{staticStyle:{"text-align":"center","font-size":"28px","font-weight":"bold","margin-bottom":"20px"}},[e._v("Create new trade")]),a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-three-fifths is-offset-one-fifth"},[a("b-field",[a("b-select",{attrs:{placeholder:"Select type",size:"is-medium",expanded:""},on:{input:e.fixInputs},model:{value:e.trade.type,callback:function(t){e.$set(e.trade,"type",t)},expression:"trade.type"}},[a("option",{attrs:{value:"BUY"}},[e._v("I want to buy an asset")]),a("option",{attrs:{value:"SELL"}},[e._v("I want to sell an asset")])])],1),a("b-field",[a("b-select",{attrs:{placeholder:"Select asset",size:"is-medium",expanded:""},on:{input:e.fixInputs},model:{value:e.trade.pair,callback:function(t){e.$set(e.trade,"pair",t)},expression:"trade.pair"}},[a("option",{attrs:{value:""}},[e._v("Select an asset")]),e._l(e.assets,(function(t){return a("option",{key:t.address,domProps:{value:t.address}},[e._v(e._s(t.genesis.name))])}))],2)],1),a("b-field",{staticClass:"text-center",attrs:{label:"Amount "+e.chains[e.trade.pair]+" you mean to "+e.trade.type}},[a("b-input",{attrs:{size:"is-large",type:"is-dark"},on:{input:function(t){return e.calculatePrice("pair")}},model:{value:e.amountPair,callback:function(t){e.amountPair=t},expression:"amountPair"}})],1),a("b-field",{staticClass:"text-center",attrs:{label:"Amount LYRA "+e.labelAsset}},[a("b-input",{staticClass:"text-center",attrs:{size:"is-large",type:"is-dark"},on:{input:function(t){return e.calculatePrice("asset")}},model:{value:e.amountAsset,callback:function(t){e.amountAsset=t},expression:"amountAsset"}})],1),e.price?a("h3",{staticStyle:{"text-align":"center","font-size":"18px","font-weight":"bold","margin-bottom":"20px"}},[e._v("You're "+e._s(e.labelTrading)+" at "+e._s(e.price)+" LYRA for 1 "+e._s(e.chains[e.trade.pair]))]):e._e(),e.isSending?e._e():a("div",{staticClass:"text-center"},[e.valid?a("div",{staticClass:"button is-primary is-large",on:{click:e.openUnlock}},[e._v("CREATE TRADE")]):e._e()]),e.isSending?a("div",{staticClass:"text-center"},[e._v(" Creating trade, please wait. ")]):e._e()],1)])],1)},s=[],n=(a("b680"),a("96cf"),a("1da1")),i=a("bc3a"),o={name:"Home",mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.checkUser(),e.next=4,t.getAllAssets();case 4:t.isLoading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{checkUser:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.scrypta.keyExist();case 3:r=t.sent,34===r.length&&(a.user=r);case 5:case"end":return t.stop()}}),t)})))()},getAllAssets:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.scrypta.connectNode();case 3:return r=t.sent,t.next=6,a.axios.get(r+"/sidechain/list");case 6:for(n in s=t.sent,a.assets=s["data"]["data"],a.assets)i=a.assets[n],a.chains[i.address]=i.genesis.symbol;case 9:case"end":return t.stop()}}),t)})))()},fixInputs:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,"BUY"!==a.trade.type){t.next=10;break}return a.labelAsset="you mean to spend",a.labelTrading="buying",t.next=6,a.axios.post(a.apiurl+"/wallet/balance",{asset:"LYRA",address:a.user});case 6:r=t.sent,a.userBalance=r["data"],t.next=17;break;case 10:if("SELL"!==a.trade.type){t.next=17;break}return a.labelAsset="you want to earn",a.labelTrading="selling",t.next=15,a.axios.post(a.apiurl+"/wallet/balance",{asset:a.trade.pair,address:a.user});case 15:s=t.sent,a.userBalance=s["data"];case 17:case"end":return t.stop()}}),t)})))()},openUnlock:function(){var e=!0,t=this,a=0;"BUY"===t.trade.type?(a=parseFloat(t.amountAsset)+.001,parseFloat(t.userBalance)<a&&(e=!1,t.$buefy.toast.open({message:"Not enough balance, you have "+t.userBalance+" LYRA!",type:"is-danger"}))):"SELL"===t.trade.type&&parseFloat(t.userBalance)<parseFloat(t.amountPair)&&(e=!1,t.$buefy.toast.open({message:"Not enough assets, you have "+t.userBalance+" "+t.chains[t.trade.pair]+"!",type:"is-danger"})),0!==t.amountAsset&&0!==t.amountPair&&""!==t.trade.pair||(e=!1,t.$buefy.toast.open({message:"Fill all the fields!",type:"is-danger"})),!0===e&&t.$buefy.dialog.prompt({message:"Enter your wallet password",inputAttrs:{placeholder:"Enter password",type:"password"},trapFocus:!0,onConfirm:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var s,n,i,o,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.scrypta.readKey(r);case 2:if(s=e.sent,!1!==s){e.next=7;break}t.$buefy.toast.open({message:"Wrong password!",type:"is-danger"}),e.next=37;break;case 7:return t.isSending=!0,n={asset:"LYRA",pair:t.trade.pair,type:t.trade.type,amountAsset:parseFloat(t.amountAsset),amountPair:parseFloat(t.amountPair),senderAddress:t.user},e.next=11,t.scrypta.signMessage(s.prv,JSON.stringify(n));case 11:return i=e.sent,n.insertProof=i.signature,n.insertPubKey=i.pubkey,n.insertHash=i.hash,e.next=17,t.axios.post(t.apiurl+"/trades/create",n);case 17:if(o=e.sent,!0!==o["data"]["success"]){e.next=35;break}if("BUY"!==t.trade.type){e.next=27;break}return e.next=22,t.axios.post(t.apiurl+"/wallet/sendlyra",{from:t.user,to:o["data"]["address"],amount:a,private_key:s.prv});case 22:c=e.sent,t.isSending=!1,!0===c["data"]["success"]?(t.$buefy.toast.open({message:"Order placed correctly!",type:"is-success"}),setTimeout((function(){window.location="/#/user"}),1e3)):t.$buefy.toast.open({message:"Somthing goes wrong please retry.",type:"is-danger"}),e.next=33;break;case 27:if("SELL"!==t.trade.type){e.next=33;break}return e.next=30,t.axios.post(t.apiurl+"/wallet/sendtoken",{from:t.user,to:o["data"]["address"],amount:t.amountPair,private_key:s.prv,pubkey:s.key,sidechain_address:t.trade.pair,fee:.001});case 30:u=e.sent,t.isSending=!1,!0===u["data"]["lyra"]["success"]&&1===u["data"]["sidechain"]["txs"].length?(t.$buefy.toast.open({message:"Order placed correctly!",type:"is-success"}),setTimeout((function(){window.location="/#/user"}),1e3)):(t.$buefy.toast.open({message:"Somthing goes wrong please retry.",type:"is-danger"}),t.isSending=!1);case 33:e.next=37;break;case 35:t.$buefy.toast.open({message:o["data"]["message"],type:"is-danger"}),t.isSending=!1;case 37:case"end":return e.stop()}}),e)})));function r(t){return e.apply(this,arguments)}return r}()})},calculatePrice:function(){var e=this;e.amountAsset>0&&e.amountPair>0&&(e.price=parseFloat(e.amountAsset)/parseFloat(e.amountPair),e.price=parseFloat(e.price.toFixed(8)))},logout:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.scrypta.forgetKey();case 3:location.reload();case 4:case"end":return t.stop()}}),t)})))()}},data:function(){return{scrypta:window.ScryptaCore,axios:i,user:"",userBalance:0,valid:!0,focus:"",isLoading:!0,isFullPage:!0,isSending:!1,labelAsset:"you mean to spend",labelTrading:"buying",assetSelected:"",amountPair:0,amountAsset:0,price:0,trade:{type:"BUY",pair:"",price:0},chains:{"":""},assets:[],apiurl:"https://ex.planum.dev"}}},c=o,u=a("2877"),l=Object(u["a"])(c,r,s,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-cc9f4a04.f5aa67b6.js.map