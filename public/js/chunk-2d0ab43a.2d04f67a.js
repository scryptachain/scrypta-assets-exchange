(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("b-loading",{attrs:{"is-full-page":e.isFullPage,active:e.isLoading,"can-cancel":!1},on:{"update:active":function(t){e.isLoading=t}}}),s("h2",{staticStyle:{"text-align":"center","font-size":"28px","font-weight":"bold","margin-bottom":"20px"}},[e._v("Your trades")]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-one-third is-offset-one-third"},[s("b-field",[s("b-select",{attrs:{placeholder:"Select asset",size:"is-medium",expanded:""},on:{input:e.filterAssets},model:{value:e.assetSelected,callback:function(t){e.assetSelected=t},expression:"assetSelected"}},[s("option",{attrs:{value:""}},[e._v("Filter by asset")]),e._l(e.assets,(function(t){return s("option",{key:t.address,domProps:{value:t.address}},[e._v(e._s(t.genesis.name))])}))],2)],1)],1)]),s("b-tabs",{staticClass:"block",attrs:{size:"is-medium",position:"is-centered",type:"is-toggle-rounded",animated:!1}},[s("b-tab-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"Sellling"}},[0===e.sells.length?s("div",[s("h2",{staticStyle:{"text-align":"center","font-weight":"bold","font-size":"24px"}},[e._v("No sell orders.")])]):e._e(),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-three-fifths is-offset-one-fifth"},e._l(e.sells,(function(t){return s("div",{key:t.uuid},["SELL"===t.type?s("div",{staticClass:"list-trade"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("strong",[e._v("STATE")]),s("br"),e._v(" "+e._s(t.state)+" ")]),s("div",{staticClass:"column"},[s("strong",[e._v("SELLING")]),s("br"),e._v(" "+e._s(t.amountPair)+" "+e._s(e.chains[t.pair])+" ")]),s("div",{staticClass:"column"},[s("strong",[e._v("FOR")]),s("br"),e._v(" "+e._s(t.amountAsset)+" LYRA ")]),s("div",{staticClass:"column"},[s("strong",[e._v("EXPIRES")]),s("br"),e._v(" "+e._s(t.expiration)+" ")]),s("div",{staticClass:"column"},[s("div",{staticClass:"button is-primary is-large",staticStyle:{float:"right"},on:{click:function(s){return e.cancelTrade(t.uuid)}}},[e._v("CANCEL")])])])]):e._e()])})),0)])]),s("b-tab-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"Buying"}},[0===e.buys.length?s("div",[s("h2",{staticStyle:{"text-align":"center","font-weight":"bold","font-size":"24px"}},[e._v("No buy orders.")])]):e._e(),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-three-fifths is-offset-one-fifth"},e._l(e.buys,(function(t){return s("div",{key:t.uuid},["BUY"===t.type?s("div",{staticClass:"list-trade"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("strong",[e._v("STATE")]),s("br"),e._v(" "+e._s(t.state)+" ")]),s("div",{staticClass:"column"},[s("strong",[e._v("BUYING")]),s("br"),e._v(" "+e._s(t.amountPair)+" "+e._s(e.chains[t.pair])+" ")]),s("div",{staticClass:"column"},[s("strong",[e._v("FOR")]),s("br"),e._v(" "+e._s(t.amountAsset)+" LYRA ")]),s("div",{staticClass:"column"},[s("strong",[e._v("EXPIRES")]),s("br"),e._v(" "+e._s(t.expiration)+" ")]),s("div",{staticClass:"column"},[s("div",{staticClass:"button is-primary is-large",staticStyle:{float:"right"},on:{click:function(s){return e.cancelTrade(t.uuid)}}},[e._v("CANCEL")])])])]):e._e()])})),0)])]),s("b-tab-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"Completed"}},[0===e.completed.length?s("div",[s("h2",{staticStyle:{"text-align":"center","font-weight":"bold","font-size":"24px"}},[e._v("No completed trades.")])]):e._e(),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-three-fifths is-offset-one-fifth"},e._l(e.completed,(function(t){return s("div",{key:t.uuid},["BUY"===t.type?s("div",{staticClass:"list-trade"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("strong",[e._v(e._s(t.type.toUpperCase()))]),s("br"),e._v(" "+e._s(t.amountPair)+" "+e._s(e.chains[t.pair])+" ")]),s("div",{staticClass:"column"},[s("strong",[e._v("FOR")]),s("br"),e._v(" "+e._s(t.amountAsset)+" LYRA ")]),s("div",{staticClass:"column"},[s("strong",[e._v("PRICE")]),s("br"),e._v(" "+e._s(t.amountAsset/t.amountPair)+" LYRA ")])])]):e._e()])})),0)])])],1)],1)},r=[],n=(s("96cf"),s("1da1")),i=s("bc3a"),c={name:"Home",mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.checkUser(),e.next=4,t.getAllAssets();case 4:t.getActiveTrades();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{checkUser:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e,t.next=3,s.scrypta.keyExist();case 3:a=t.sent,34===a.length?s.user=a:window.location="/#/";case 5:case"end":return t.stop()}}),t)})))()},convertTime:function(e){var t=e,s=new Date(1e3*t),a=s.getUTCDate(),r=s.getUTCMonth()+1,n=s.getUTCFullYear(),i=s.getHours(),c="0"+s.getMinutes(),o="0"+s.getSeconds(),l=a+"/"+r+"/"+n+" at "+i+":"+c.substr(-2)+":"+o.substr(-2);return l},getAllAssets:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s,a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e,t.next=3,s.scrypta.connectNode();case 3:return a=t.sent,t.next=6,s.axios.get(a+"/sidechain/list");case 6:for(n in r=t.sent,s.assets=r["data"]["data"],s.assets)i=s.assets[n],s.chains[i.address]=i.genesis.symbol;case 9:case"end":return t.stop()}}),t)})))()},filterAssets:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a in s=e,s.isLoading=!0,s.buys=[],s.sells=[],s.completed=[],s.trades)"Completed"!==s.trades[a].state&&"Canceled"!==s.trades[a].state?"BUY"===s.trades[a].type?s.trades[a].pair!==s.assetSelected&&""!==s.assetSelected||s.buys.push(s.trades[a]):"SELL"===s.trades[a].type&&(s.trades[a].pair!==s.assetSelected&&""!==s.assetSelected||s.sells.push(s.trades[a])):"Completed"===s.trades[a].state&&(s.trades[a].pair!==s.assetSelected&&""!==s.assetSelected||s.completed.push(s.trades[a]));s.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},getActiveTrades:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e,s.buys=[],s.sells=[],s.completed=[],t.next=6,s.axios.post(s.apiurl+"/trades/active",{address:s.user});case 6:for(r in a=t.sent,s.trades=a["data"],s.trades)s.trades[r].timestamp=s.convertTime(s.trades[r].timestamp),s.trades[r].expiration=s.convertTime(s.trades[r].expiration),"Completed"!==s.trades[r].state&&"Canceled"!==s.trades[r].state?"BUY"===s.trades[r].type?s.buys.push(s.trades[r]):"SELL"===s.trades[r].type&&s.sells.push(s.trades[r]):"Completed"===s.trades[r].state&&s.completed.push(s.trades[r]);s.isLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},cancelTrade:function(e){var t=!0,s=this;!0===t&&s.$buefy.dialog.prompt({message:"Enter your wallet password to cancel trade.",inputAttrs:{placeholder:"Enter password here",type:"password"},trapFocus:!0,onConfirm:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,i,c,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.scrypta.readKey(a);case 2:if(r=t.sent,!1!==r){t.next=7;break}s.$buefy.toast.open({message:"Wrong password!",type:"is-danger"}),t.next=20;break;case 7:return s.isSending=!0,i={uuid:e,action:"cancelTrade"},t.next=11,s.scrypta.signMessage(r.prv,JSON.stringify(i));case 11:return c=t.sent,o={},o.tradeUUID=e,o.cancelProof=c.signature,o.cancelPubKey=c.pubkey,t.next=18,s.axios.post(s.apiurl+"/trades/cancel",o);case 18:l=t.sent,!0===l["data"]["success"]?(s.$buefy.toast.open({message:"Trade cancelled correctly!",type:"is-success"}),setTimeout(Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.getActiveTrades();case 2:s.isSending=!1;case 3:case"end":return e.stop()}}),e)}))),1e3)):(s.$buefy.toast.open({message:"Somthing goes wrong please retry.",type:"is-danger"}),s.isSending=!1);case 20:case"end":return t.stop()}}),t)})));function a(e){return t.apply(this,arguments)}return a}()})},logout:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e,t.next=3,s.scrypta.forgetKey();case 3:location.reload();case 4:case"end":return t.stop()}}),t)})))()}},data:function(){return{scrypta:window.ScryptaCore,axios:i,user:"",isLoading:!0,isFullPage:!0,assetSelected:"",chains:{},trades:[],assets:[],sells:[],buys:[],completed:[],apiurl:"https://ex.planum.dev"}}},o=c,l=s("2877"),u=Object(l["a"])(o,a,r,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.2d04f67a.js.map